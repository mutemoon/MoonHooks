{"version":3,"file":"index.js","sources":["../src/useList.ts","../src/useListWithId.ts"],"sourcesContent":["import { Draft } from \"immer\";\r\nimport { useImmer } from \"use-immer\";\r\n\r\nexport const useList = <T>(initialValue: T[]) => {\r\n  const [list, setList] = useImmer(initialValue);\r\n\r\n  type DraftCondition = (item: Draft<T>) => boolean;\r\n  type Condition = (item: T) => boolean;\r\n\r\n  return {\r\n    list,\r\n    update(\r\n      condition: DraftCondition,\r\n      editor: (item: Draft<T>) => void\r\n    ) {\r\n      setList((list) => {\r\n        const item = list.find(condition);\r\n        if (item) editor(item);\r\n      });\r\n    },\r\n    delete(condition: DraftCondition) {\r\n      setList(list => list.filter((item) => !condition(item)));\r\n    },\r\n    findOne(condition: Condition) {\r\n      return list.find(condition);\r\n    },\r\n    findMany(condition: Condition) {\r\n      return list.filter(condition);\r\n    },\r\n    push(item: T) {\r\n      setList((list) => {\r\n        list.push(item as Draft<T>);\r\n      });\r\n    },\r\n    pop() {\r\n      setList((list) => {\r\n        list.pop();\r\n      });\r\n    },\r\n  };\r\n};","import { Draft } from \"immer\";\r\nimport { useList } from \"./useList\";\r\n\r\nexport const useListWithId = <\r\n  T extends { id: any },\r\n  ID extends T extends { id: infer U } ? U : never\r\n>(\r\n  initialValue: T[]\r\n) => {\r\n  const handler = useList(initialValue);\r\n\r\n  return {\r\n    ...handler,\r\n    updateById(id: ID, editor: (item: Draft<T>) => void) {\r\n      handler.update((item) => item.id === id, editor);\r\n    },\r\n    deleteById(id: ID) {\r\n      handler.delete((item) => item.id === id);\r\n    },\r\n    deleteByItem({ id }: T) {\r\n      handler.delete((item) => item.id === id);\r\n    },\r\n    findById(id: ID) {\r\n      return handler.findOne((item) => item.id === id);\r\n    },\r\n    findManyById(id: ID) {\r\n      return handler.findMany((item) => item.id === id);\r\n    },\r\n  };\r\n};\r\n"],"names":["useList","initialValue","_useImmer","useImmer","list","setList","update","condition","editor","item","find","_delete","filter","findOne","findMany","push","pop","handler","_extends","updateById","id","deleteById","deleteByItem","_ref","findById","findManyById"],"mappings":"2BAGaA,EAAU,SAAIC,GACzB,IAAAC,EAAwBC,EAAAA,SAASF,GAA1BG,EAAIF,EAAA,GAAEG,EAAOH,EAKpB,GAAA,MAAO,CACLE,KAAAA,EACAE,gBACEC,EACAC,GAEAH,EAAQ,SAACD,GACP,IAAMK,EAAOL,EAAKM,KAAKH,GACnBE,GAAMD,EAAOC,EACnB,EACF,EAACE,OAAAA,SACMJ,GACLF,EAAQ,SAAAD,GAAQ,OAAAA,EAAKQ,OAAO,SAACH,GAAS,OAACF,EAAUE,EAAK,EAAC,EACzD,EACAI,QAAOA,SAACN,GACN,OAAOH,EAAKM,KAAKH,EACnB,EACAO,kBAASP,GACP,OAAOH,EAAKQ,OAAOL,EACrB,EACAQ,cAAKN,GACHJ,EAAQ,SAACD,GACPA,EAAKW,KAAKN,EACZ,EACF,EACAO,eACEX,EAAQ,SAACD,GACPA,EAAKY,KACP,EACF,EAEJ,8QCrC6B,SAI3Bf,GAEA,IAAMgB,EAAUjB,EAAQC,GAExB,OAAAiB,EACKD,CAAAA,EAAAA,GACHE,WAAU,SAACC,EAAQZ,GACjBS,EAAQX,OAAO,SAACG,GAAS,OAAAA,EAAKW,KAAOA,CAAE,EAAEZ,EAC3C,EACAa,WAAU,SAACD,GACTH,SAAe,SAACR,GAAI,OAAKA,EAAKW,KAAOA,CAAE,EACzC,EACAE,aAAYA,SAAAC,OAAGH,EAAEG,EAAFH,GACbH,EAAO,OAAQ,SAACR,GAAS,OAAAA,EAAKW,KAAOA,CAAE,EACzC,EACAI,SAAQ,SAACJ,GACP,OAAOH,EAAQJ,QAAQ,SAACJ,GAAI,OAAKA,EAAKW,KAAOA,CAAE,EACjD,EACAK,aAAYA,SAACL,GACX,OAAOH,EAAQH,SAAS,SAACL,GAAS,OAAAA,EAAKW,KAAOA,CAAE,EAClD,GAEJ"}