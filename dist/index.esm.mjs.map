{"version":3,"file":"index.esm.mjs","sources":["../src/useList.ts","../src/useListWithId.ts"],"sourcesContent":["import { Draft } from \"immer\";\nimport { useImmer } from \"use-immer\";\n\nexport const useList = <T>(initialValue: T[]) => {\n  const [list, setList] = useImmer(initialValue);\n\n  type DraftCondition = (item: Draft<T>) => boolean;\n  type Condition = (item: T) => boolean;\n\n  return {\n    list,\n    update(condition: DraftCondition, editor: (item: Draft<T>) => void) {\n      setList((list) => {\n        const items = list.filter(condition);\n        items.forEach((item) => editor(item));\n      });\n    },\n    delete(condition: DraftCondition) {\n      setList((list) => list.filter((item) => !condition(item)));\n    },\n    findOne(condition: Condition) {\n      return list.find(condition);\n    },\n    findMany(condition: Condition) {\n      return list.filter(condition);\n    },\n    push(item: Draft<T>) {\n      setList((list) => {\n        list.push(item);\n      });\n    },\n    pop() {\n      setList((list) => {\n        list.pop();\n      });\n    },\n  };\n};\n","import { Draft } from \"immer\";\nimport { useList } from \"./useList\";\n\nexport const useListWithId = <\n  T extends { id: any },\n  ID extends T extends { id: infer U } ? U : never\n>(\n  initialValue: T[]\n) => {\n  const handler = useList(initialValue);\n\n  return {\n    ...handler,\n    updateById(id: ID, editor: (item: Draft<T>) => void) {\n      handler.update((item) => item.id === id, editor);\n    },\n    deleteById(id: ID) {\n      handler.delete((item) => item.id === id);\n    },\n    deleteByItem({ id }: T) {\n      handler.delete((item) => item.id === id);\n    },\n    findById(id: ID) {\n      return handler.findOne((item) => item.id === id);\n    },\n    findManyById(id: ID) {\n      return handler.findMany((item) => item.id === id);\n    },\n  };\n};\n"],"names":["useList","initialValue","_useImmer","useImmer","list","setList","update","condition","editor","filter","forEach","item","_delete","findOne","find","findMany","push","pop","useListWithId","handler","_extends","updateById","id","deleteById","deleteByItem","_ref","findById","findManyById"],"mappings":"qCAGa,IAAAA,EAAU,SAAIC,GACzB,IAAAC,EAAwBC,EAASF,GAA1BG,EAAIF,EAAEG,GAAAA,EAAOH,EAAA,GAKpB,MAAO,CACLE,KAAAA,EACAE,OAAMA,SAACC,EAA2BC,GAChCH,EAAQ,SAACD,GACOA,EAAKK,OAAOF,GACpBG,QAAQ,SAACC,UAASH,EAAOG,EAAK,EACtC,EACF,EAACC,OAAAA,SACML,GACLF,EAAQ,SAACD,GAAS,OAAAA,EAAKK,OAAO,SAACE,GAAS,OAACJ,EAAUI,EAAK,EAAC,EAC3D,EACAE,iBAAQN,GACN,OAAOH,EAAKU,KAAKP,EACnB,EACAQ,SAAQ,SAACR,GACP,OAAOH,EAAKK,OAAOF,EACrB,EACAS,KAAIA,SAACL,GACHN,EAAQ,SAACD,GACPA,EAAKY,KAAKL,EACZ,EACF,EACAM,eACEZ,EAAQ,SAACD,GACPA,EAAKa,KACP,EACF,EAEJ,sOClCa,IAAAC,EAAgB,SAI3BjB,GAEA,IAAMkB,EAAUnB,EAAQC,GAExB,OAAAmB,EACKD,CAAAA,EAAAA,GACHE,WAAU,SAACC,EAAQd,GACjBW,EAAQb,OAAO,SAACK,GAAS,OAAAA,EAAKW,KAAOA,CAAE,EAAEd,EAC3C,EACAe,WAAU,SAACD,GACTH,SAAe,SAACR,GAAI,OAAKA,EAAKW,KAAOA,CAAE,EACzC,EACAE,aAAYA,SAAAC,OAAGH,EAAEG,EAAFH,GACbH,EAAO,OAAQ,SAACR,GAAS,OAAAA,EAAKW,KAAOA,CAAE,EACzC,EACAI,SAAQ,SAACJ,GACP,OAAOH,EAAQN,QAAQ,SAACF,GAAI,OAAKA,EAAKW,KAAOA,CAAE,EACjD,EACAK,aAAYA,SAACL,GACX,OAAOH,EAAQJ,SAAS,SAACJ,GAAS,OAAAA,EAAKW,KAAOA,CAAE,EAClD,GAEJ"}